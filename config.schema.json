{
  "pluginAlias": "HomePodMiniMusicSensor",
  "pluginType": "platform",
  "singular": true,
  "customUi": true,
  "headerDisplay": "<p align='center'><img src='https://raw.githubusercontent.com/DM911-AI/homebridge-homepod-mini-music-sensor/main/assets/HomePod_2.jpg' width='100%' style='max-width: 600px;'></p><p align='center'><strong>üéµ Transform your HomePod mini into a smart music sensor for HomeKit</strong></p>",
  "footerDisplay": "<p align='center'>For detailed documentation, see the <a href='https://github.com/DM911-AI/homebridge-homepod-mini-music-sensor#readme' target='_blank'>GitHub README</a></p><p align='center'>‚≠ê Star on <a href='https://github.com/DM911-AI/homebridge-homepod-mini-music-sensor' target='_blank'>GitHub</a> if you find this useful!</p>",
  "schema": {
    "type": "object",
    "properties": {
      "name": {
        "title": "Platform Name",
        "type": "string",
        "default": "HomePod Mini Music Sensor",
        "required": true,
        "description": "Name for this platform (shown in Homebridge logs)"
      },
      "detectMusic": {
        "title": "üéµ Detect Music",
        "type": "boolean",
        "default": true,
        "description": "Trigger sensor when music is playing (Apple Music, Spotify, etc.)"
      },
      "detectPodcasts": {
        "title": "üéôÔ∏è Detect Podcasts",
        "type": "boolean",
        "default": false,
        "description": "Trigger sensor when podcasts/audiobooks are playing (content longer than Max Duration)"
      },
      "detectMovies": {
        "title": "üé¨ Detect Movies/TV",
        "type": "boolean",
        "default": false,
        "description": "Trigger sensor when movies or TV shows are playing via AirPlay"
      },
      "maxDuration": {
        "title": "‚è±Ô∏è Max Duration (seconds)",
        "type": "number",
        "default": 600,
        "minimum": 60,
        "maximum": 7200,
        "description": "Maximum content duration to detect. Default: 600 (10 minutes). Content longer than this will only trigger if 'Detect Podcasts' is enabled."
      },
      "requireArtist": {
        "title": "üé§ Require Artist Field",
        "type": "boolean",
        "default": true,
        "description": "Only trigger if content has an artist field. Helps filter out movies/TV which typically don't have artist metadata. Disable if you want to detect movies."
      },
      "updateInterval": {
        "title": "üîÑ Update Interval (seconds)",
        "type": "number",
        "default": 5,
        "minimum": 1,
        "maximum": 60,
        "description": "How often to check playback status. Lower = more responsive but higher CPU usage. Default: 5 seconds."
      },
      "homepods": {
        "title": "HomePods",
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "name": {
              "title": "Display Name",
              "type": "string",
              "required": true,
              "placeholder": "e.g., Bedroom",
              "description": "Friendly name for this HomePod (will appear in Home app)"
            },
            "id": {
              "title": "Device ID",
              "type": "string",
              "required": true,
              "placeholder": "e.g., A294FB11E039",
              "description": "HomePod identifier (see instructions below)"
            }
          }
        }
      }
    }
  },
  "layout": [
    {
      "type": "help",
      "helpvalue": "<h4 style='text-align: center;'>üéµ HomePod Mini Music Sensor</h4><p style='text-align: center;'>Create HomeKit automations based on what's playing on your HomePods!</p><hr>"
    },
    {
      "type": "section",
      "title": "üéõÔ∏è Detection Settings",
      "expandable": true,
      "expanded": false,
      "items": [
        {
          "key": "detectMusic",
          "type": "boolean"
        },
        {
          "key": "detectPodcasts",
          "type": "boolean"
        },
        {
          "key": "detectMovies",
          "type": "boolean"
        },
        {
          "key": "maxDuration",
          "type": "number"
        },
        {
          "key": "requireArtist",
          "type": "boolean"
        },
        {
          "key": "updateInterval",
          "type": "number"
        }
      ]
    },
    {
      "type": "help",
      "helpvalue": "<hr><h5>üí° Detection Tips:</h5><ul><li><strong>Music Only:</strong> Keep defaults (Music: ON, Podcasts: OFF, Movies: OFF)</li><li><strong>Music + Podcasts:</strong> Enable both + increase Max Duration to 3600 (60 min)</li><li><strong>Everything:</strong> Enable all + disable 'Require Artist Field'</li></ul>"
    },
    {
      "type": "section",
      "title": "üè† Your HomePods",
      "expandable": true,
      "expanded": true,
      "items": [
        {
          "key": "homepods",
          "type": "array",
          "buttonText": "‚ûï Add HomePod",
          "items": [
            "homepods[].name",
            "homepods[].id"
          ]
        }
      ]
    },
    {
      "type": "help",
      "helpvalue": "<hr><h5>üìã How to Find HomePod IDs:</h5><ol><li>Open <strong>Terminal</strong></li><li>Run: <code>python3.13 -m pyatv.scripts.atvremote scan</code></li><li>Find your HomePod in the list</li><li>Copy the <strong>Identifier</strong> (remove colons/dashes)</li><li>Example: <code>A2:94:FB:11:E0:39</code> ‚Üí <code>A294FB11E039</code></li></ol><p><em>üí° Each HomePod will appear as a separate Motion Sensor in HomeKit</em></p>"
    }
  ]
}
