{
  "pluginAlias": "HomePodMiniMusicSensor",
  "pluginType": "platform",
  "singular": true,
  "headerDisplay": "<p align='center'><img src='https://raw.githubusercontent.com/DM911-AI/homebridge-homepod-mini-music-sensor/main/assets/HomePod-2-and-Mini-feature-1.jpg' width='600px'></p>",
  "footerDisplay": "For help and examples, see the [GitHub README](https://github.com/DM911-AI/homebridge-homepod-mini-music-sensor#readme)",
  "schema": {
    "type": "object",
    "properties": {
      "name": {
        "title": "Platform Name",
        "type": "string",
        "default": "HomePod Mini Music Sensor",
        "required": true
      },
      "detectMusic": {
        "title": "Detect Music",
        "type": "boolean",
        "default": true,
        "description": "Trigger sensor when music is playing (Apple Music, Spotify, etc.)"
      },
      "detectPodcasts": {
        "title": "Detect Podcasts",
        "type": "boolean",
        "default": false,
        "description": "Trigger sensor when podcasts are playing"
      },
      "detectMovies": {
        "title": "Detect Movies/TV",
        "type": "boolean",
        "default": false,
        "description": "Trigger sensor when movies or TV shows are playing (AirPlay)"
      },
      "maxDuration": {
        "title": "Max Duration (seconds)",
        "type": "number",
        "default": 600,
        "minimum": 60,
        "description": "Maximum content duration to detect (default: 600 = 10 minutes). Content longer than this will be ignored unless 'Detect Podcasts' is enabled."
      },
      "requireArtist": {
        "title": "Require Artist Field",
        "type": "boolean",
        "default": true,
        "description": "Only trigger if content has an artist field (helps filter out movies/TV)"
      },
      "updateInterval": {
        "title": "Update Interval (seconds)",
        "type": "number",
        "default": 5,
        "minimum": 1,
        "maximum": 60,
        "description": "How often to check playback status (default: 5 seconds)"
      },
      "homepods": {
        "title": "HomePods",
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "name": {
              "title": "Display Name",
              "type": "string",
              "required": true,
              "placeholder": "Bedroom"
            },
            "id": {
              "title": "Device ID",
              "type": "string",
              "required": true,
              "placeholder": "A294FB11E039",
              "description": "Find using: python3.13 -m pyatv.scripts.atvremote scan"
            }
          }
        }
      }
    }
  },
  "layout": [
    {
      "type": "help",
      "helpvalue": "<h5>üéµ HomePod Mini Music Sensor</h5><p>Transform your HomePod mini into a smart HomeKit sensor!</p>"
    },
    {
      "type": "section",
      "title": "üéõÔ∏è Detection Settings",
      "expandable": true,
      "expanded": false,
      "items": [
        "detectMusic",
        "detectPodcasts",
        "detectMovies",
        {
          "key": "maxDuration",
          "type": "number"
        },
        "requireArtist",
        {
          "key": "updateInterval",
          "type": "number"
        }
      ]
    },
    {
      "type": "section",
      "title": "üè† HomePods",
      "expandable": true,
      "expanded": true,
      "items": [
        {
          "key": "homepods",
          "type": "array",
          "buttonText": "Add HomePod",
          "items": [
            "homepods[].name",
            "homepods[].id"
          ]
        }
      ]
    },
    {
      "type": "help",
      "helpvalue": "<p><strong>üìã How to find HomePod IDs:</strong></p><ol><li>Open Terminal</li><li>Run: <code>python3.13 -m pyatv.scripts.atvremote scan</code></li><li>Copy the identifier (remove colons)</li><li>Example: A2:94:FB:11:E0:39 ‚Üí A294FB11E039</li></ol>"
    }
  ]
}
